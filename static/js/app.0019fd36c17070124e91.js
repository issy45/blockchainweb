webpackJsonp([1],{NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),n=e("mP1F"),o=e.n(n),i={name:"App",data:function(){return{blocks:this.$store.state.blockchain.blocks,error:""}},methods:{startBlockchain:function(){this.$store.dispatch("block/generateGenesisBlock"),this.$store.dispatch("blockchain/pushBlock",{previousHash:this.previousHash,timestamp:this.timestamp,data:this.data,nonce:this.nonce}),this.$store.dispatch("block/resetBlock")},verifyBlock:function(){var t=this.$store.getters["blockchain/latestBlock"];if(t){var s=o()(t.previousHash+t.timestamp+t.data+t.nonce).toString();if(this.previousHash!==s)return void(this.error="previousHashには前ブロックのハッシュ値を入れてください。");if(!this.timestamp||!this.timestamp.match(/^\d+/))return void(this.error="timestampは数値で入力してください。");if(this.timestamp<=t.timestamp)return void(this.error="timestampには前ブロックのtimestampより大きい値を入れてください。")}o()(this.previousHash+this.timestamp+this.data+this.nonce).toString().match(/^0/)?this.error="":this.error="ハッシュ値の先頭１文字が「0」になるようにnonceを調整してください。"},pushBlock:function(){this.verifyBlock(),""===this.error&&(this.$store.dispatch("blockchain/pushBlock",{previousHash:this.previousHash,timestamp:this.timestamp,data:this.data,nonce:this.nonce}),this.$store.dispatch("block/resetBlock"))}},computed:{previousHash:{get:function(){return this.$store.state.block.previousHash},set:function(t){this.$store.dispatch("block/changePreviousHash",t)}},timestamp:{get:function(){return this.$store.state.block.timestamp},set:function(t){this.$store.dispatch("block/changeTimestamp",t)}},data:{get:function(){return this.$store.state.block.data},set:function(t){this.$store.dispatch("block/changeData",t)}},nonce:{get:function(){return this.$store.state.block.nonce},set:function(t){this.$store.dispatch("block/changeNonce",t)}}},filters:{hash:function(t){return o()(t).toString()}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container",attrs:{id:"app"}},[t.blocks.length>0?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("ul",{staticClass:"list-group"},t._l(t.blocks,function(s,a){return e("li",{key:a,staticClass:"list-group-item"},[t._v("\n          previousHash: "+t._s(s.previousHash)),e("br"),t._v("\n          timestamp: "+t._s(s.timestamp)),e("br"),t._v("\n          data: "+t._s(s.data)),e("br"),t._v("\n          nonce: "+t._s(s.nonce)),e("br"),t._v("\n          hash: "+t._s(t._f("hash")(s.previousHash+s.timestamp+s.data+s.nonce))+"\n        ")])}))]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[t._v("\n          Mining\n        ")]),t._v(" "),e("div",{staticClass:"card-body"},[e("table",{staticClass:"table table-bordered"},[e("tbody",[e("tr",[e("th",{attrs:{width:"120"}},[t._v("previousHash")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.previousHash,expression:"previousHash"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.previousHash},on:{input:function(s){s.target.composing||(t.previousHash=s.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("timestamp")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.timestamp,expression:"timestamp"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.timestamp},on:{input:function(s){s.target.composing||(t.timestamp=s.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("data")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.data},on:{input:function(s){s.target.composing||(t.data=s.target.value)}}})])]),t._v(" "),e("tr",[e("th",[t._v("nonce")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nonce,expression:"nonce"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.nonce},on:{input:function(s){s.target.composing||(t.nonce=s.target.value)}}})])]),t._v(" "),e("tr",[e("td",{attrs:{colspan:"2"}},[t._v("\n                  "+t._s(t._f("hash")(t.previousHash+t.timestamp+t.data+t.nonce))+"\n                ")])])])]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"btn btn-warning",on:{click:t.pushBlock}},[t._v("Blockchainに追加")])])])])]):e("div",{staticClass:"row"},[e("button",{staticClass:"btn btn-warning",on:{click:t.startBlockchain}},[t._v("start Blockchain")])])])},staticRenderFns:[]};var r=e("VU/8")(i,c,!1,function(t){e("PS+K")},null,null).exports,l=(e("j1ja"),e("NYxO"));a.a.use(l.a);var u=new l.a.Store({modules:{block:{namespaced:!0,state:{previousHash:null,timestamp:null,data:null,nonce:null},mutations:{generateGenesisBlock:function(t){t.previousHash="0000000000000000000000000000000000000000000000000000000000000000",t.timestamp=15e8,t.data="my genesis block!!",t.nonce=8},changePreviousHash:function(t,s){t.previousHash=s},changeTimestamp:function(t,s){t.timestamp=s},changeData:function(t,s){t.data=s},changeNonce:function(t,s){t.nonce=s},resetBlock:function(t){t.previousHash=null,t.timestamp=null,t.data=null,t.nonce=null}},actions:{generateGenesisBlock:function(t){(0,t.commit)("generateGenesisBlock")},changePreviousHash:function(t,s){(0,t.commit)("changePreviousHash",s)},changeTimestamp:function(t,s){(0,t.commit)("changeTimestamp",s)},changeData:function(t,s){(0,t.commit)("changeData",s)},changeNonce:function(t,s){(0,t.commit)("changeNonce",s)},resetBlock:function(t){(0,t.commit)("resetBlock")}}},blockchain:{namespaced:!0,state:{blocks:[]},getters:{latestBlock:function(t){return t.blocks[t.blocks.length-1]}},mutations:{pushBlock:function(t,s){t.blocks.push({previousHash:s.previousHash,timestamp:s.timestamp,data:s.data,nonce:s.nonce})}},actions:{pushBlock:function(t,s){(0,t.commit)("pushBlock",s)}}}}});a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:r},template:"<App/>",store:u})},"PS+K":function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.0019fd36c17070124e91.js.map